{"componentChunkName":"component---src-templates-post-page-js","path":"/2019/03-01/deploy-your-own-npm-registry","result":{"data":{"prevPost":{"id":"b7056da1-8c2a-5c7c-81ea-0fd3b269adae","fields":{"slug":"/2019/02-08/mini-program-usage-experience-for-finger"},"excerpt":"小程序已经有 1 年多时间了吧！从刚出来我就在关注，当时小程序写个组件，需要使用  这样的形式来复用组件。非常的不直观。从 1.6.…","timeToRead":22,"frontmatter":{"title":"“Finger 音乐课堂”小程序开发总结","cover":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHmUtnmpBP/xAAbEAACAQUAAAAAAAAAAAAAAAAAAgEDEBExMv/aAAgBAQABBQIZMWjmps//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAEAExgf/aAAgBAQAGPwItSYv/xAAbEAACAwADAAAAAAAAAAAAAAABEQAQMUFhof/aAAgBAQABPyEAkh+RZ65cyoCHun//2gAMAwEAAgADAAAAEPgv/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QZ//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EBn/xAAbEAEBAQACAwAAAAAAAAAAAAABEQAxQSFRgf/aAAgBAQABPxC5kHxRXXJRwQPXX3JSc4BAOXrEsIgr703/2Q==","aspectRatio":2.4,"src":"/static/286d12a028006c165277cfc50d03877d/b4082/cover.jpg","srcSet":"/static/286d12a028006c165277cfc50d03877d/eebca/cover.jpg 300w,\n/static/286d12a028006c165277cfc50d03877d/6fecb/cover.jpg 600w,\n/static/286d12a028006c165277cfc50d03877d/b4082/cover.jpg 1200w,\n/static/286d12a028006c165277cfc50d03877d/3e6db/cover.jpg 1800w,\n/static/286d12a028006c165277cfc50d03877d/176ac/cover.jpg 1920w","sizes":"(max-width: 1200px) 100vw, 1200px"}}},"date":"Feb 8","author":{"id":"blackcater","nickname":"blackcater","avatar":{"childImageSharp":{"resize":{"src":"/static/3e72cc359750952f52e27f3b2a59a0ff/c0e17/blackcater.png"}}}}}},"nextPost":{"id":"9ee666ff-e2fb-51c0-9c9b-d9ca8c073fac","fields":{"slug":"/2019/04-09/iview-usage-experience"},"excerpt":"最近开始接触 vue 和 iview。这次将最近使用的经验总结给大家，希望对刚接触 iview 的开发者有一定的帮助。 什么是 iview iview 是基于 vue 开发的主题框架。其设计理念来源于 Ant Design。可以算是 Vue 中的 Ant Design…","timeToRead":11,"frontmatter":{"title":"iview 使用经验总结","cover":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+0lEQVQoz01SXU9TQRDdpA9EY0TvztXee/tJK1pRSpEYqaLRYoylFNre0lrxm2hQMKJBIgryxCvxwd97nNlpiQ+TnczsnD1zzhpTWoWJFpFI1uAl67CpJijXBV15Drr+Fv70B/gzHzU4l5rr5WLYqAkvWIK9XAddqrt5Y2Y6MJUYiegxLDcp0wYVBzz4Dn7lE+j2Dvz5XRculxr3qDCAV4xBQQPn8k2cKbVgBXCsvAZTHSARLPKLy7D5NdDVl/DLmwzwFf69fdDCAccvkORSkx7fsRN8N1zG2cIKxsqxAhLTHU83MB7Kuiv8ck9Xnd2CX90D3T9EEJ8gaP/l/MDV/MoWqPQGlO+5GQGStR3gSAObXNJmoQ+aEsBt+Hf34DFgpnuCdOePyx3g7BBwQgEFYxRGk4aKGw0NufZatbqzi+DREdJPjpF9eoywdgSa/64M+Y5jKMYk1RAhZTzWwOOilTPbwvkb67zyBmhuB7b6A8HDQ0QMlKr9RvjgJ2v4DVTZdsZYdtvLd+EJy7AxXJmTEaiXbuFisQ87+UKdnN6EvfUZdu6LhjC7+Z7ZveJ1+wzWxoUcyxQ2dZ5xjK6roJZPYWqz/HUKz5yTzqCpDQ3RbXJdtePH7ZCVk21IzJwK+h9Tm1pl0A5/i57+SfnIEvIIr2gzLZXo1IyGznP+D7+fPCp0Q38mAAAAAElFTkSuQmCC","aspectRatio":2.4,"src":"/static/35b03247c4e6d2deedc07b3bf2297ad9/57599/cover.png","srcSet":"/static/35b03247c4e6d2deedc07b3bf2297ad9/c0acf/cover.png 300w,\n/static/35b03247c4e6d2deedc07b3bf2297ad9/5c50c/cover.png 600w,\n/static/35b03247c4e6d2deedc07b3bf2297ad9/57599/cover.png 1200w,\n/static/35b03247c4e6d2deedc07b3bf2297ad9/0035e/cover.png 1800w,\n/static/35b03247c4e6d2deedc07b3bf2297ad9/09c94/cover.png 2400w,\n/static/35b03247c4e6d2deedc07b3bf2297ad9/cffab/cover.png 2870w","sizes":"(max-width: 1200px) 100vw, 1200px"}}},"date":"Apr 9","author":{"id":"blackcater","nickname":"blackcater","avatar":{"childImageSharp":{"resize":{"src":"/static/3e72cc359750952f52e27f3b2a59a0ff/c0e17/blackcater.png"}}}}}},"post":{"id":"30f984f2-e95b-5270-8340-3d87b38090cf","fields":{"slug":"/2019/03-01/deploy-your-own-npm-registry"},"html":"<p>当公司到达一定程度，为了提高前端的开发效率，公司内部会创造一系列的框架或者工具库。这些包肯定是不可以暴露到外网之外的，所以你可以搭建一个私有的 npm。如果你们公司较为富有，其实直接用 npm 的企业版也是很不错的。</p>\n<!-- end -->\n<h2 id=\"前言\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"前言 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前言</h2>\n<p>公司现在前端已经有四人了，技术栈包括 React 和 Vue 等，公司项目十分多。每个项目都有一些共同的部分，例如：JS 和 Native 通信封装，Universal Link，共有的一些工具方法（文件上传，时间价格格式化等）等。想要提高开发效率，第一步就是提取公共部分，减少重复劳动。这些公共部分不能存储在外网。因此需要内网搭建私有 npm 镜像。</p>\n<h2 id=\"verdaccio\" style=\"position:relative;\"><a href=\"#verdaccio\" aria-label=\"verdaccio permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>verdaccio</h2>\n<p><a href=\"https://github.com/verdaccio/verdaccio\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">verdaccio</a> 是我去年很早就开始关注的一个项目了。这也是这篇文章的主角。</p>\n<p><em>注意：下面内容牵扯到一些 docker 基础内容，这里不做教学，如果你不了解 docker，可以去看一下阮一峰大神的 <a href=\"http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">docker 入门基础</a></em></p>\n<h3 id=\"拉取镜像\" style=\"position:relative;\"><a href=\"#%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F\" aria-label=\"拉取镜像 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>拉取镜像</h3>\n<p>verdaccio 是支持 docker 的。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 拉取 verdaccio 镜像</span>\n<span class=\"token operator\">></span> docker pull verdaccio/verdaccio\n\n<span class=\"token comment\"># 查看 本地所有镜像</span>\n<span class=\"token operator\">></span> docker images\n\n<span class=\"token comment\">## 你可能会看到如下结果</span>\n<span class=\"token comment\"># REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span>\n<span class=\"token comment\"># verdaccio/verdaccio   latest              cab129e3f6f6        4 weeks ago         345MB</span></code></pre></div>\n<p>因为镜像默认是从 dockerhub 拉取的，所以你可能会卡在这个地方。</p>\n<p>如果你一直拉取不下来，你可以设置代理。我是用的是 <a href=\"http://www.daocloud.io/mirror#accelerator-doc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">daocloud.io</a>，他提供免费的镜像加速服务。你只需要注册个账号，然后访问 <a href=\"http://www.daocloud.io/mirror#accelerator-doc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.daocloud.io/mirror#accelerator-doc</a>，根据页面上的文档设置就行了。</p>\n<h3 id=\"启动容器\" style=\"position:relative;\"><a href=\"#%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8\" aria-label=\"启动容器 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>启动容器</h3>\n<p>在 docker 的概念中。镜像你可以理解为模板，容器可以理解为由镜像产生的实例。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 创建一个 verdaccio 镜像的容器</span>\n<span class=\"token operator\">></span> docker run -it --rm --name verdaccio -p <span class=\"token number\">4873</span>:4873 verdaccio/verdaccio\n\n<span class=\"token comment\">## 你可以看到如下类似的输出</span>\n<span class=\"token comment\"># > docker run -it --rm --name verdaccio -p 4873:4873 verdaccio/verdaccio</span>\n<span class=\"token comment\"># warn --- config file  - /verdaccio/conf/config.yaml</span>\n<span class=\"token comment\"># warn --- http address - http://0.0.0.0:4873/ - verdaccio/2.7.4</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.43557582668187%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABNklEQVQoz6WOyU7DMBCGwyYQnCLoQhFq1TgLENLabmy3oUkoYk0lXoE7IJ4PlbdiuRQz2E4E6hEx0qffHo8/27JURSInIU9vuyG+Qce0MByRAoVluqEioibNWY8p4sKJBkW3ZOr04ovuYbSufZZP2TObXEEgckDxCbhsDGiYAeIpIJGV8AqWgkuG4NIR+IMEgjiBAzXvEvHRbDuu9q0RTGZxngE+LeYkv5RemkrvPJfeWSa9iSLPJEoy6QgFSyXCQiqp9OhIKulnoD+BxetOaz/UwlU/4rMgHuvm3KejL/XaL7hKWq3NfmhAWGPkgPr8rb7XLoWdkLx4NNFN6fQ5qKFF+hU/Pb6w1kKnx95r1Q9X7Frz2q7vPtn15r3KB5V/Qd95tButu43NrW2r0UFWVUuK5X9g6huNJ434ubIiPgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bash-1\"\n        title=\"bash-1\"\n        src=\"/static/e495c275e237bf5e5064c92469abf531/f0628/bash-1.png\"\n        srcset=\"/static/e495c275e237bf5e5064c92469abf531/8c2ab/bash-1.png 300w,\n/static/e495c275e237bf5e5064c92469abf531/3f01f/bash-1.png 600w,\n/static/e495c275e237bf5e5064c92469abf531/f0628/bash-1.png 1200w,\n/static/e495c275e237bf5e5064c92469abf531/d7b40/bash-1.png 1754w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">bash-1</figcaption>\n  </figure></p>\n<p>访问 <code class=\"language-text\">http://0.0.0.0:4873/#/</code> 你会看到如下页面：</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.104491292392304%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSUlEQVQoz32Qv07CUBjF+0iKm8HB6GCi0ck4ufga3RgaXgC2lqG4EMIzsKhQ28QQJTEpMZhgTP+ARHorUnr8bmmBgulJfvm+tqfnnlyhl9/Bp3QD51bE+/Up+pfn6F9xLvB2doTewR56+RzN3GrydzFmfhcfh/sYnRxH3wWvfQf/+Qn+6wuY0QbTOdpiGjQfW2DaQwqvfZ+CaS380D98F5ChgPglZsR0bc+SEAYBwvk8hvYghp59xvA9HmP8NQKbTOB7HmZTig7DlW+DrYYhmbkmFDAYDGDbNizLguu6GA6HcBwHHgUn3sS/bLgZOKdmXIZhoFAooFgsRkiSFCGKIprN5tL7b2ByEicJ7Ha7KJfLqFQqUBQlQpZllEol6LqeClzB73DjhCTQNE1Uq9WIer2ORqOBWq0GVVXR6XRS15PZcL1llrbbLfgDssmItOFa02EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"verdaccio-website\"\n        title=\"verdaccio-website\"\n        src=\"/static/1a682b8c4ab8b5363007ef21faaeacc9/f0628/verdaccio-website.png\"\n        srcset=\"/static/1a682b8c4ab8b5363007ef21faaeacc9/8c2ab/verdaccio-website.png 300w,\n/static/1a682b8c4ab8b5363007ef21faaeacc9/3f01f/verdaccio-website.png 600w,\n/static/1a682b8c4ab8b5363007ef21faaeacc9/f0628/verdaccio-website.png 1200w,\n/static/1a682b8c4ab8b5363007ef21faaeacc9/57025/verdaccio-website.png 1800w,\n/static/1a682b8c4ab8b5363007ef21faaeacc9/bcb97/verdaccio-website.png 2182w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">verdaccio-website</figcaption>\n  </figure></p>\n<p>然后你就可以按照如上方式进行包的提交了。</p>\n<p>但是到这里，这篇文章可没有结束，才是开始。</p>\n<h3 id=\"后台运行\" style=\"position:relative;\"><a href=\"#%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C\" aria-label=\"后台运行 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>后台运行</h3>\n<p>运行上一节的指令后，当你按 <code class=\"language-text\">ctrl/cmd + c</code> 之后，网页无法访问了。这里我们需要对上面的指令进行修改</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 后台运行容器</span>\n<span class=\"token operator\">></span> docker run -it -d --name verdaccio -p <span class=\"token number\">4873</span>:4873 verdaccio/verdaccio\n\n<span class=\"token comment\"># 查看正在运行容器</span>\n<span class=\"token operator\">></span> docker <span class=\"token function\">ps</span>\n\n<span class=\"token comment\">## 你可以看到如下结果</span>\n<span class=\"token comment\"># CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                    NAMES</span>\n<span class=\"token comment\"># c7bd43009fbe        verdaccio/verdaccio   \"/usr/local/bin/dumb…\"   4 seconds ago       Up 3 seconds        0.0.0.0:4873->4873/tcp   verdaccio</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.43557582668187%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABd0lEQVQoz6WPSU/CUBSF6xRjNCBhKBgXQEspbelES1vaUqAgQiEaTYju3KPx9xn8Vw4bfO95W3DB2pt8ufe84dwcioKS7a4uWf5NRVSnVUmLGKAqKFFFUCNGjGc1gYVzTjEjVm1vUNpRVTYiRjZnMF9VGs3j2I/idfvNGkyI4PQJZwUJdTckPOia3SP1zoDwoFmYmZZLarpDWIBrdQhvuIQ3PcJq1nepzNZivyNONVfju0diTe/X+iBC1vgWSb1rpIcz5M0XSA0jJPcnSAzGqOmPEKc7qOn0kOYPkWh1f6AToe1/pPNFKTY8lO1gNZw/kFZvvFa8EIfzBdagw3asuAMMn7Hs9LFgeljzR1gCDQZY647iOyTaAWmY3meGvtgYlnnlXdIhpuHG25ModaCm2RDFTiImMf/0tteNDhi5sRmcWV/Z0mVieJChS5NUgX5N5QrL83zxOZ2jE+J5h8Ku3r5bAi+ZQunp5PQsS9ENkdrWHrD/D5L6BWwTkd7LYUu7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bash-2\"\n        title=\"bash-2\"\n        src=\"/static/73cd3ae3d4bd1f8b27e92e5a1762565d/f0628/bash-2.png\"\n        srcset=\"/static/73cd3ae3d4bd1f8b27e92e5a1762565d/8c2ab/bash-2.png 300w,\n/static/73cd3ae3d4bd1f8b27e92e5a1762565d/3f01f/bash-2.png 600w,\n/static/73cd3ae3d4bd1f8b27e92e5a1762565d/f0628/bash-2.png 1200w,\n/static/73cd3ae3d4bd1f8b27e92e5a1762565d/d7b40/bash-2.png 1754w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">bash-2</figcaption>\n  </figure></p>\n<p>这时候，容器就在后台运行了。如果服务器挂了，重启之后，你只需要运行：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 启动容器</span>\n<span class=\"token operator\">></span> docker start c7bd43009fbe\n\n<span class=\"token comment\"># c7bd43009fbe 为上一步生成的 容器 ID 值。</span></code></pre></div>\n<p>这样看似十分完美了对不？但是还是有一些问题。</p>\n<h3 id=\"配置-volume\" style=\"position:relative;\"><a href=\"#%E9%85%8D%E7%BD%AE-volume\" aria-label=\"配置 volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>配置 volume</h3>\n<p>在 docker 中，容器你可以想象成一台机器，容器之间是完全隔离的。在上面的例子里，我们如果上传了一个包，这个包会存在容器内。如果现在 verdaccio 镜像升级了，我们也需要迁移到新版本。那我们只能启动新的容器之后，重新在传原来上传过的包。包少还好，如果包很多的时候，这将会让你头疼至极！</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 172px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.95348837209302%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdElEQVQ4y71UPY+CQBTkz/sT7CxMbOitpCGGwsbYXCOGD0FFjRAhURQE3u2sgKgYD+9ym0x2Wd6bffNmQZBl2TQMw1RV1ZzNZh+B5Rq6rluTyeRL2Gw29FfjeDyGAqsuZes0SZL0NwOE+/3eF0zT5Oz53kcjYwOz7/vB/xDifR5Truv2GhHWkT2SNpJcTaiR+Lnk8XhMg8GAFEUhSZKaSa7KKg4YDockiiJ1u11qt9uvWnEjZPfwR07iAHZXX3ahJLRtmzzPI03TyLKsO8zn8ztgD4oe49hetlqtboR4CMOwlPqmmjKmEscJWWFXQnzP5/P5yUXXdSkPpOVyybHb7eocz8BREq7X65KwashoNKJOp0O9Xo9arRaf+/3+k4lIA8ddhZfL5UlaEATkOA7HdDrl1b4wMdtut1fCxWJBAGShj+wXxHE4HOh0OlEURRw4EHMcx/xdNY7lZTCNE8IlVIIZlaCKAkXfABxarKsxeVyG3sLlb8RmYffULQhhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"docker-container\"\n        title=\"docker-container\"\n        src=\"/static/eabace8a7dc5f610acee011a5caed6e0/2fa71/docker-container.png\"\n        srcset=\"/static/eabace8a7dc5f610acee011a5caed6e0/2fa71/docker-container.png 172w\"\n        sizes=\"(max-width: 172px) 100vw, 172px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">docker-container</figcaption>\n  </figure></p>\n<p>Verdaccio 镜像支持 VOLUME。VOLUMN 就像在你的机器上创建了一个软连接，连接到容器内。这两上传的包会存储在机器上，而不是容器内。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> docker run -it --rm --name verdaccio -p <span class=\"token number\">4873</span>:4873 -v ~/verdaccio:/verdaccio verdaccio/verdaccio</code></pre></div>\n<p>运行上面指令后会报错误：“fatal--- cannot open config file /verdaccio/conf/config.yaml: ENOENT: no such file or directory, open '/verdaccio/conf/config.yaml'”。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.286202964652226%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABgElEQVQoz6WQ207jMBCGCwKtuOYSFbpNajdpnINzcg51SNNWq21AXO17rfZ5FrQrlUjc8DwIy8PUu/ACWPr0z8ieTxqPRnh8IRMmmruvLN5NPN5bftLbYWawgrT38mXPhDS1HWSGQ235aT/1kx3mnR2k2ej/OXK4uE+bDThJBW4ugWDavIAZYkcCvOIa/Ko1/SwuDQSh+G6e4oxowAqyv+/CUzcWD+23G0jq1WvS9ZoV15rGpaa81HPMWSg0DmgrEtqOcm2HuSa80E5aa0/IV1a2KEwPwtN/wij/Xa2/A5frF3n7Q8XbW8W7nWKbXvnbGzVvtsqqVsrJloqUK0VEq0jRKopg/zKvOsC1/6DrxAgbuXrcyA7KYgl10eF6a3CKBmgtgVbSpFs1wLMagmwJMX4Bx/sYVz1kUncwC7KnD2Ek6p9umDxPqbuf2v4wJmwYU2+4JAeYYYz1BWWIN1y5IRIMl44/TNxgP1mEz2Oy+GWEbLE4xuIcufok5ydfzo7fABTTmzoxIsfUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bash-8\"\n        title=\"bash-8\"\n        src=\"/static/4f612b73a834f351ebddfc5c30eebbc5/f0628/bash-8.png\"\n        srcset=\"/static/4f612b73a834f351ebddfc5c30eebbc5/8c2ab/bash-8.png 300w,\n/static/4f612b73a834f351ebddfc5c30eebbc5/3f01f/bash-8.png 600w,\n/static/4f612b73a834f351ebddfc5c30eebbc5/f0628/bash-8.png 1200w,\n/static/4f612b73a834f351ebddfc5c30eebbc5/d7b40/bash-8.png 1754w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">bash-8</figcaption>\n  </figure></p>\n<p>意思是我们缺一个文件。这个文件呢，项目的 <code class=\"language-text\">README.md</code> 没有明确告知你，但是官方项目中是有的。 在项目的 <a href=\"https://github.com/verdaccio/verdaccio/tree/master/conf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">conf</a> 目录下，我们能找到这个文件。我们直接将项目中的 <code class=\"language-text\">default.yaml</code> 文件拷贝到 <code class=\"language-text\">~/verdaccio/conf/config.yaml</code> 中。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> <span class=\"token builtin class-name\">cd</span> ~/verdaccio\n<span class=\"token operator\">></span> <span class=\"token function\">mkdir</span> conf\n<span class=\"token operator\">></span> <span class=\"token function\">wget</span> https://raw.githubusercontent.com/verdaccio/verdaccio/master/conf/default.yaml -O conf/config.yaml</code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.741163055872285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACGUlEQVQoz6WSS2/aQBCACSXnXkpoExKKDTYvP7DXBj8B83KAJE6UpKeol6jH/pJwyf9pqdpTD/1BkdFMxxsSqeeu9Glnd1afZ7yby9HQ/Yip3jgR9d5SaHdXkmoSjFMn2qazUiyXx3xfs3hcU8yVqJhLsWMkosrs3G7syRr7bnpDlLs9bDojFKwARdNDgXlYNRyUeyE2+kMUTJfw+FxjPkp2wGm5EdZ0++eLcL+iso27SJD5UcpmF9CKlqDTrM8TMOJL0KfntE6e9whjfglatkeoo9O0EUxR0KxMuM+Ffpxsbu+/Ynx9l65uP8Py5g7COIHh4gq82Rk4kxWxBGswB3sUQ3+8gK4/BqU/gLreS+WscpVlwgIXUnITXXxCd3a+tUenqNMX29SiTC1LdLi+I1tn1I3nuEW/ommHW4naJ+GvV6Gk2xsznCKJtw1nBIobge5PoBtMwQinwIZzIgaFciSClh0AyaBNFXacwTYT/yOUdeubMxhjxwmflMlZ2naGaYN5adMOUjqc1g2HU+v2U3oJPNewKG/5aacfPqneCEXN+vEq1Jzh7yBOMJxeYbS6QY9ie7xERu27FHcHc9T8CbXpo0wvQNrNTaosq65Dt0zCP1xYyL8pvC2W7ktHx4+HH8SHYrm6fleurIvH1XWx/JHzviJyDmjv4ETgZOvDam19JEgPZVF6LJ0IX14qzEZ+d+X/Q75UEff+Ak7i7eXcSiIyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bash-9\"\n        title=\"bash-9\"\n        src=\"/static/4d7fe8b8a704460bb49fc26b1f4929fe/f0628/bash-9.png\"\n        srcset=\"/static/4d7fe8b8a704460bb49fc26b1f4929fe/8c2ab/bash-9.png 300w,\n/static/4d7fe8b8a704460bb49fc26b1f4929fe/3f01f/bash-9.png 600w,\n/static/4d7fe8b8a704460bb49fc26b1f4929fe/f0628/bash-9.png 1200w,\n/static/4d7fe8b8a704460bb49fc26b1f4929fe/d7b40/bash-9.png 1754w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">bash-9</figcaption>\n  </figure></p>\n<p>执行完上面的指令之后，你可以在 <code class=\"language-text\">~/verdaccio/conf</code> 目录下发现一个 <code class=\"language-text\">config.yaml</code> 文件。</p>\n<p>现在我们再一次执行上面的 <code class=\"language-text\">docker run ...</code> 指令。你会注意到，这次运行成功了。</p>\n<p>我们现在试着上传一个包试试！这里我上传了一个 <code class=\"language-text\">learn-verdaccio</code> 的包。</p>\n<p>传完包之后，我们可以在 <code class=\"language-text\">~/verdaccio/conf</code> 看到多出来了一些文件和目录。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.23375142531357%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABa0lEQVQoz6WRy07CQBSGIcpSAdNSQokgbcECTrlMSy9Aa0FBCgGJURPfhC54M0x04TtBJuPpUBauneRrz/zT+XJOmkjAQqaLkeWtys1OcHPXnUdImj6XWwZ7q9ie13XnmGkGI6olxAiAlazpRiJeSbVj7rqDMW30hlQ1BvRWH9Bq16ZKx6Jy26J1yBumy/ZKnEfnNeww6nAmacbXSZiqavjTdMe0600OLXdCNGdEQEzgIoGLpIJ0UtEMtlfaJpGBKK/DN01zeEDOPQj1SJhiwp4/2/nLN9p/et4/rj/IcLYm1sOC9EYBGQYvBI8WBDk+EzHpX/ZV3KcVhCPhORPW2sY3HoyoYU+pNV5EnVLokiLbh3pK2/4SxvJgfPM4djyyqvcZTcujEsI/TJiExyUnvGb4/DbLFzYXnBCm+XyYEQphVhBZneZy4VVeDDnxOuQKMVDzYinki6VNrljeQvZ+6pD9GODsnySFspL4BVunkC67PrVdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bash-10\"\n        title=\"bash-10\"\n        src=\"/static/ec0a2837f87059ee40ea2097825b5f43/f0628/bash-10.png\"\n        srcset=\"/static/ec0a2837f87059ee40ea2097825b5f43/8c2ab/bash-10.png 300w,\n/static/ec0a2837f87059ee40ea2097825b5f43/3f01f/bash-10.png 600w,\n/static/ec0a2837f87059ee40ea2097825b5f43/f0628/bash-10.png 1200w,\n/static/ec0a2837f87059ee40ea2097825b5f43/d7b40/bash-10.png 1754w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">bash-10</figcaption>\n  </figure></p>\n<ul>\n<li><code class=\"language-text\">htpasswd</code> 文件存储着用户的账户密码等信息。</li>\n<li><code class=\"language-text\">storage</code> 存储着我们上传的一些包，或者如果你开启了包的缓存机制，这里可能也会存着你 <code class=\"language-text\">npm install</code> 下载的包。</li>\n</ul>\n<p>到这里，如果以后 verdaccio 镜像升级，我们并不需要做太多修改。只需要在执行一遍上面的 <code class=\"language-text\">docker run ...</code> 即可。</p>\n<h3 id=\"自定义-配置\" style=\"position:relative;\"><a href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89-%E9%85%8D%E7%BD%AE\" aria-label=\"自定义 配置 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自定义 配置</h3>\n<p>上一节我们看到：在 verdaccio 项目的 <code class=\"language-text\">conf</code> 目录下，还有一个 <code class=\"language-text\">full.yaml</code> 文件。文件里有详细的英文描述，这里我对一些常用的参数进行说明：</p>\n<ul>\n<li><code class=\"language-text\">storage</code>: 指定包存储的位置，默认 <code class=\"language-text\">./storage</code> 就是 <code class=\"language-text\">/verdaccio/conf/storage</code></li>\n<li><code class=\"language-text\">web</code>: 和 web 站点相关的一些配置</li>\n<li><code class=\"language-text\">auth</code>: 访问权限的配置，可以限制网站注册的人数等。一般来说，都是搭建在内网的，其实可以不用配置这个，默认即可。</li>\n<li><code class=\"language-text\">uplinks</code>: 配置包搜索的时候，需要查询的 repositories。这里默认配置了 npm，我们可以加上 cnpm。为了节约空间，这里在设置的时候，我们需要打开 <code class=\"language-text\">cache: false</code> 属性。这样 拉取的包不会存储在机器上。</li>\n<li><code class=\"language-text\">packages</code>: 配置个匹配的包的访问和发布权限等。</li>\n</ul>\n<p>剩下一些比方，配置 https，配置 notify，给钉钉发消息等。</p>\n<p>下面放一个，我自己正在用的配置。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> /verdaccio/storage\n\n<span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Mine NPM\n  <span class=\"token key atrule\">logo</span><span class=\"token punctuation\">:</span> logo.png\n\n<span class=\"token key atrule\">auth</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">htpasswd</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">file</span><span class=\"token punctuation\">:</span> /verdaccio/conf/htpasswd\n\n<span class=\"token key atrule\">uplinks</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">npmjs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//registry.npmjs.org/\n    <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n  <span class=\"token key atrule\">yarnjs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//registry.yarnpkg.com/\n    <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n  <span class=\"token key atrule\">cnpmjs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//registry.npm.taobao.org/\n    <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n\n<span class=\"token key atrule\">packages</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">'**'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">access</span><span class=\"token punctuation\">:</span> $all\n    <span class=\"token key atrule\">publish</span><span class=\"token punctuation\">:</span> $authenticated\n    <span class=\"token key atrule\">proxy</span><span class=\"token punctuation\">:</span> cnpmjs\n\n<span class=\"token key atrule\">logs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> stdout<span class=\"token punctuation\">,</span> <span class=\"token key atrule\">format</span><span class=\"token punctuation\">:</span> pretty<span class=\"token punctuation\">,</span> <span class=\"token key atrule\">level</span><span class=\"token punctuation\">:</span> http <span class=\"token punctuation\">}</span>\n\n<span class=\"token key atrule\">notify</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">method</span><span class=\"token punctuation\">:</span> POST\n  <span class=\"token key atrule\">packagePattern</span><span class=\"token punctuation\">:</span> .*\n  <span class=\"token key atrule\">packagePatternFlags</span><span class=\"token punctuation\">:</span> i\n  <span class=\"token key atrule\">headers</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token key atrule\">'Content-type'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'application/json; charset=utf-8'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">endpoint</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//oapi.dingtalk.com/robot/send<span class=\"token punctuation\">?</span>&lt;token<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'{ \"msgtype\": \"actionCard\", \"actionCard\": { \"title\": \"有包更新啦~\\\\(≧▽≦)/~\", \"text\": \"### {{name}} v{{dist-tags.latest}} 发布了 \\n **描述** \\n\\n {{description}} \\n\\n **作者** \\n\\n {{maintainers.0.name}} &amp;lt;{{maintainers.0.email}}&amp;gt; \\n\", \"hideAvatar\": \"0\", \"btnOrientation\": \"0\", \"singleTitle\": \"查看详情\", \"singleURL\": \"http://192.168.3.22:4873/#/detail/{{name}}\" } }'</span></code></pre></div>","excerpt":"当公司到达一定程度，为了提高前端的开发效率，公司内部会创造一系列的框架或者工具库。这些包肯定是不可以暴露到外网之外的，所以你可以搭建一个私有的 npm。如果你们公司较为富有，其实直接用 npm 的企业版也是很不错的。","headings":[{"value":"前言","depth":2},{"value":"verdaccio","depth":2},{"value":"拉取镜像","depth":3},{"value":"启动容器","depth":3},{"value":"后台运行","depth":3},{"value":"配置 volume","depth":3},{"value":"自定义 配置","depth":3}],"timeToRead":8,"wordCount":{"paragraphs":47,"sentences":47,"words":233},"frontmatter":{"title":"搭建私有npm镜像","cover":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABDklEQVQoz5VSTUtCQRT1l6iLl/qs8M37yPJpGn4U4saVCFFotRFaWBC4KAgU3bVtEfpTT+fGKINkjYvDmbn3vPPOzJ1ELmphg7CJrGYbbLSGR8LcZA3TA43MFq/XpnanofnXQtiARxxxrTRLTdbCVgldNtPRJXpBFVN1iokq4cM7wdiPf/hNnWGsYszY6/vnSFHr/mWYZzNJ0Z1fQZemI7+MR5p1ghreaXIVXOCevSeaDshimLcxHFL8yjQrL8QzP27T8NOL8MLEX6wtCStDuQ+HHId13PBIknShipgz3QPTXrMmuGW9TI1jO2URSlLBIffHOrkJZ98py2XLcTL6mbi6tq5bTfm/B/6bwTa+ActaTpmOpy+iAAAAAElFTkSuQmCC","aspectRatio":2.4,"src":"/static/034e6cdf9b365f259ac282fb9e597878/57599/cover.png","srcSet":"/static/034e6cdf9b365f259ac282fb9e597878/c0acf/cover.png 300w,\n/static/034e6cdf9b365f259ac282fb9e597878/5c50c/cover.png 600w,\n/static/034e6cdf9b365f259ac282fb9e597878/57599/cover.png 1200w","sizes":"(max-width: 1200px) 100vw, 1200px"}}},"date":"Mar 1","author":{"id":"blackcater","nickname":"blackcater","avatar":{"childImageSharp":{"resize":{"src":"/static/3e72cc359750952f52e27f3b2a59a0ff/c0e17/blackcater.png"}}}},"tags":[{"id":"docker","name":"Docker"}],"series":null}}},"pageContext":{"id":"30f984f2-e95b-5270-8340-3d87b38090cf","prevSlug":"/2019/02-08/mini-program-usage-experience-for-finger","nextSlug":"/2019/04-09/iview-usage-experience"}}}
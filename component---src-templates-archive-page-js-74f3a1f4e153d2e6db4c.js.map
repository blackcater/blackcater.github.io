{"version":3,"sources":["webpack:///./src/templates/archive/page.js"],"names":["data","pageContext","posts","pick","map","x","node","yearsMap","years","forEach","post","year","push","className","key","id","to","query"],"mappings":"2FAAA,gIASe,sBAA4B,IAAzBA,EAAwB,EAAxBA,KAAMC,EAAkB,EAAlBA,YAChBC,EAAQC,YAAKH,EAAM,eAAeI,KAAI,SAAAC,GAAC,OAAIA,EAAEC,SAAS,GACtDC,EAAW,GACbC,EAAQ,GAeZ,OAbAN,EAAMO,SAAQ,SAAAC,GACZ,IAAMC,EAAOR,YAAKO,EAAM,oBAEnBH,EAASI,KACZJ,EAASI,GAAQ,GACjBH,EAAMI,KAAKD,IAGbJ,EAASI,GAAMC,KAAKF,MAGtBF,EAAQA,EAAMJ,KAAI,SAAAO,GAAI,MAAK,CAAEA,OAAMT,MAAOK,EAASI,OAGjD,kBAAC,IAAD,CAAQE,UAAU,gBAChB,yBAAKA,UAAU,yBACZL,EAAMJ,KAAI,gBAAGO,EAAH,EAAGA,KAAMT,EAAT,EAASA,MAAT,OACT,yBAAKY,IAAKH,EAAME,UAAU,sBACxB,yBAAKA,UAAU,6BAA6BF,GAC3CT,EAAME,KAAI,SAAAM,GAAI,OACb,yBAAKI,IAAKJ,EAAKK,GAAIF,UAAU,sBAC3B,yBAAKA,UAAU,4BACZV,YAAKO,EAAM,qBAEd,yBAAKG,UAAU,6BACb,kBAAC,OAAD,CAAMG,GAAIb,YAAKO,EAAM,gBAClBP,YAAKO,EAAM,uBAGhB,yBAAKG,UAAU,8BACb,kBAAC,OAAD,CAAMG,GAAE,WAAab,YAAKO,EAAM,0BAC7BP,YAAKO,EAAM,yCAOxB,kBAAC,IAAeT,MAMjB,IAAMgB,EAAK","file":"component---src-templates-archive-page-js-74f3a1f4e153d2e6db4c.js","sourcesContent":["import React from 'react';\nimport { Link, graphql } from 'gatsby';\nimport pick from 'utils/pick';\n\nimport Layout from 'components/Layout';\nimport Pagination from 'components/Pagination';\n\nimport './style.less';\n\nexport default ({ data, pageContext }) => {\n  const posts = pick(data, 'posts.edges').map(x => x.node) || [];\n  const yearsMap = {};\n  let years = [];\n\n  posts.forEach(post => {\n    const year = pick(post, 'frontmatter.year');\n\n    if (!yearsMap[year]) {\n      yearsMap[year] = [];\n      years.push(year);\n    }\n\n    yearsMap[year].push(post);\n  });\n\n  years = years.map(year => ({ year, posts: yearsMap[year] }));\n\n  return (\n    <Layout className=\"archive-page\">\n      <div className=\"archive-page__content\">\n        {years.map(({ year, posts }) => (\n          <div key={year} className=\"archive-page__year\">\n            <div className=\"archive-page__year__title\">{year}</div>\n            {posts.map(post => (\n              <div key={post.id} className=\"archive-page__post\">\n                <div className=\"archive-page__post__date\">\n                  {pick(post, 'frontmatter.date')}\n                </div>\n                <div className=\"archive-page__post__title\">\n                  <Link to={pick(post, 'fields.slug')}>\n                    {pick(post, 'frontmatter.title')}\n                  </Link>\n                </div>\n                <div className=\"archive-page__post__author\">\n                  <Link to={`/author/${pick(post, 'frontmatter.author.id')}`}>\n                    {pick(post, 'frontmatter.author.nickname')}\n                  </Link>\n                </div>\n              </div>\n            ))}\n          </div>\n        ))}\n        <Pagination {...pageContext} />\n      </div>\n    </Layout>\n  );\n};\n\nexport const query = graphql`\n  query ArchivePageQuery($posts: [String]) {\n    posts: allMarkdownRemark(\n      filter: { id: { in: $posts } }\n      sort: { fields: frontmatter___date, order: DESC }\n    ) {\n      edges {\n        node {\n          id\n          fields {\n            slug\n          }\n          excerpt\n          frontmatter {\n            title\n            year: date(formatString: \"YYYY\")\n            date: date(formatString: \"MMM D\")\n            author {\n              id\n              nickname\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n"],"sourceRoot":""}